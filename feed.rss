<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>alasda.ir</title><description>Alasdair's blog and resume</description><link>https://alasda.ir</link><language>en</language><lastBuildDate>Thu, 15 Jun 2023 23:27:36 +0100</lastBuildDate><pubDate>Thu, 15 Jun 2023 23:27:36 +0100</pubDate><ttl>250</ttl><atom:link href="https://alasda.ir/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://alasda.ir/posts/things-teams-cant-do</guid><title>Things that Slack can do that Teams does</title><description>Things the Teams can't do that Slack can</description><link>https://alasda.ir/posts/things-teams-cant-do</link><pubDate>Thu, 1 Jun 2023 09:39:00 +0100</pubDate><content:encoded><![CDATA[<p>A growing list of things that Teams can‚Äôt do that Slack can. While some things on the list may appear trite or subjective, taken as a whole Teams is not a tool fit for purpose in a development environment.</p><h2>üîá Mute</h2><p>Teams can‚Äôt mute channels for a predefined amount of time. A user either has to mute a channel and hope that they remember to tune it later, or leave a channel to blast constant alerts at the user.</p><p>Teams doesn‚Äôt not respect your status of BUSY. Even if your profile shows a red circle and you are on a call, Teams will still alert you to incoming messages on all groups you are in.</p><h2>üßµThreads</h2><p>Teams. Can. Not. Do. Threads.</p><p>In channel of even a few people, it is often the case that the channel will be discussing two or more things at the same time. Slack uses threads for this, keeping the channel well organised and distraction free.</p><h2>üìπ Video Calls</h2><p>Teams and Slack can do video calls, however you can not draw on the screen during a call. This is a critical component of developers discussions (especially pull requests) as we need to point to places in the code or diagram quickly what we are talking about. The hours spent say ‚ÄúNo, not that line, the other one‚Ä¶. no not there, above and to the left‚Äù is insane.</p><p>Slack does quick and easy audio calls known as huddles. They are quick ways to grab a few developers together to thrash out an issue. It‚Äôs a bit like gathering around someone‚Äôs desk to discuss and issue.</p><h2>üñãÔ∏è Markdown</h2><p>Teams markdown, especially for code is terrible.</p><p>It‚Äôs ugly and doesn‚Äôt take into account tabs, spaces or the coding language</p><p>It‚Äôs almost uneditable once the markdown has been formatted, leaving the user either to press enter and hope the others can parse the code.</p><p>Text sizes, styles (bold, italic etc) are still displayed when text is copied into a code block. This is nonsense.</p><h2>üñºÔ∏è Media and images</h2><p>Uploaded videos to Teams can not be viewed in Teams always. Often they are link to somewhere on Sharepoint and take the user away from the conversation. There is no clear reason why this is the case.</p><p>Images uploaded to teams take on different sizes, from the original size, but also in relation to each other.</p><p>It‚Äôs not always possible to crt-c and crt-v an image into Teams.</p><h2>üå¥ Away Messages</h2><p>Team does not have away messages that last a specific amount of time. If you set yourself away/busy your status stays that way.</p><p>Slack allows you to set yourself as being ‚ÄúSick until tomorrow‚Äù, ‚ÄúBusy for 2 hours‚Äù etc.</p><h1>Things that Slack can do that Teams does</h1><ul><li>Start Teams video calls</li><li>Create/view and alert you to Outlook calendar events</li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/how-to-point-to-carthage-framework-on-filesystem-2</guid><title>how-to-point-to-carthage-framework-on-filesystem-2</title><description>How to point to a local Carthage framework.</description><link>https://alasda.ir/posts/how-to-point-to-carthage-framework-on-filesystem-2</link><pubDate>Sun, 17 May 2020 19:50:00 +0100</pubDate><content:encoded><![CDATA[<p>Often a Cathage framework included in your code, is a framework that you've developed yourself. Soemtimes you might find yourself needing to update this framework and test the changes in your code.</p><p>The quickest way to do this is to modify your <code>Cartfile</code> like this</p><pre><code class="language-bash">#github "https://github.url.com/your_framework"
git "file:///file/path/to/your_framework" "branch or tag"
</code></pre><p>Once changed, run</p><pre><code>carthage update
</code></pre><p>to include the framework you are currently developing.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/bash-script-to-record-xcode-simulator</guid><title>bash-script-to-record-xcode-simulator</title><description>BASH Script to Record Xcode Simulator</description><link>https://alasda.ir/posts/bash-script-to-record-xcode-simulator</link><pubDate>Thu, 2 Jan 2020 16:41:00 +0000</pubDate><content:encoded><![CDATA[<p>I've previous <a href="http://alasda.ir/recording-a-video-of-the-xcode-simulator/">written</a> how to use <code>xcrun simctl</code> to record the simulator in an easy to use command line - I've improved this with a simple bash script.</p><h5>Record Xcode Simulator</h5><pre><code>recxcsim() {
  tmpfile="$(mktemp -d)/xcode-simulator-recording.mov"
  trap "open $tmpfile &amp;&amp; sleep 0.5 &amp;&amp; rm $tmpfile" EXIT
  echo "Recording booted simulator. Press CRT+C to stop and open file..."
	xcrun simctl io booted recordVideo $tmpfile
}
</code></pre><p>Drop this bash function into your <code>~/.bash_profile</code> or equalivant (I use <a href="https://ohmyz.sh/">ZSH</a>) and run <code>recxsim</code> at the command line. This will start</p><ul><li>start recording a booted simulator until cancelled (CRT+C)</li><li>open the video in default player (Qtime usually)</li><li>remove the temporary .mov file</li></ul><h6>Motivation</h6><p>It's very common to want to record of video of your Xcode simulator, either for demo purposes or, in my case, to check what some UI test did. It's very tedious watching the simulator and the urge visit <a href="https://www.reddit.com/r/yesyesyesno/">/r/yesyesyesno/</a> can be too great.</p><p>Now I can launch my tests, surf the internet for a bit, a</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/how-to-compile-xcode-for-device-with-newer-ios-version</guid><title>how-to-compile-xcode-for-device-with-newer-ios-version</title><description>How to compile Xcode for device with newer iOS version</description><link>https://alasda.ir/posts/how-to-compile-xcode-for-device-with-newer-ios-version</link><pubDate>Sun, 3 Nov 2019 12:26:00 +0000</pubDate><content:encoded><![CDATA[<p>I always forget how to compile and run my apps on a device with a high OS version than the supported OS of my Xcode - here's how.</p><h6>Download</h6><ul><li>Download the version of Xcode which will compile to the device - I like to use <a href="https://github.com/xcpretty/xcode-install">xcversion</a> to manage my Xcodes.</li><li>Link (or copy) the iPhoneOS device support file from the download Xcode directory to the current Xcode directory</li><li>Restart Xcode</li></ul><h6>Example</h6><p>Compile for an 11.1 device on Xcode 10.1</p><pre><code>ls -s /Applications/Xcode-13.1.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/13.1 /Applications/Xcode-10.1.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/13.1
</code></pre><p><em>Note:</em> To save up disk space copy <code>cp</code> rather than link <code>ln</code> the support files. Then delete the entire <code>Xcode-13.3.app</code> folder.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/using-xcode-to-review-big-a-pull-request</guid><title>using-xcode-to-review-big-a-pull-request</title><description>Using Xcode to review big a pull request</description><link>https://alasda.ir/posts/using-xcode-to-review-big-a-pull-request</link><pubDate>Fri, 9 Aug 2019 13:47:00 +0100</pubDate><content:encoded><![CDATA[<p>Large pull requests (PRs) are not great and we should always strive for smaller PRs. The reality of working with a large code base, where a small change can affect lots of areas, mean large, many lined PRs are often unavoidable. *</p><p>GitHub offers a very good desktop web app for reviewing pull requests. For small and medium sized review this is often good enough. For larger reviews I prefer to these tools <em>with</em> Xcode.</p><h5>How to use Xcode for large pull requests</h5><p>For this worked example the PR is from a branch <code>v_big</code> into <code>develop</code>.</p><h6>1. Get all file changes</h6><p>From the command line, checkout the PR branch and do a <em>soft</em> reset on top of the branch being merged into.</p><pre><code class="language-bash">git checkout v_big
git reset --soft &lt;commit hash&gt;
</code></pre><p>Where the hash value is the git commit where the PR's branch diverged from.</p><h6>2. Show in Xcode</h6><p>Open the project using Xcode. Open the <em>Project Navigator</em> (<code>‚åò+1</code>) and then apply the <em>Show only modified files</em> filter at the bottom of the navigator pane - see red arrow.</p><img src="https://alasda.ir/images/post-using-xcode-pull-request-xcode.png" alt="Xcode showing changed files"/><p>In the <em>Project Navigator</em> we can see all the files that have changed in this PR.</p><p>If you switch to use the <em>Version Editor</em> (<code>‚áß + ‚éá + ‚åò + Return</code>) we can see all the changes.</p><p>Now you can move around between the modified files and getting a clearer picture of the changes.</p><p>Of course don't forget to leave comments</p><h6>Benefits</h6><p>The benefits of this approach mean that the reviewer can navigator around the changes, using action like <em>Jump to...</em> to inspect what new changes have been made.</p><p>Often a project is structure to represent a directory-file system - with grouping of similar code or functionalities. Using this Xcode view, the reviewer can see where cluster of changes have occurred as well as being able to quickly choose the critical areas to focus on - while ignoring others.</p><p>Another reason I prefer this approach from Github, is that I'm now reviewing in my <em>most</em> natural environment with my familiar styling and shortcuts - which helps focus the mind.</p><p>Enjoy.</p><hr><p><strong></strong>* Of course if a small change results in many file changes, this a massive red flag that the code base is far too interconnected. A refactoring to decouple structures would be the next thing you do.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/apples-own-payment-ux-is-just-plain-bad</guid><title>apples-own-payment-ux-is-just-plain-bad</title><description>Apple's own payment UX is just plain bad</description><link>https://alasda.ir/posts/apples-own-payment-ux-is-just-plain-bad</link><pubDate>Tue, 12 Feb 2019 14:12:00 +0000</pubDate><content:encoded><![CDATA[<p>Apple's platform can feel arbitary and capricious at time. One rule applies to you, normal users and app, while another to Apple and their apps.</p><p>Checkout these two payment flows üëá</p><p style="text-align:center"><i>Apple's own iCloud payment flow</i></p><img alt="iCloud payment flow" src="https://alasda.ir/images/post-apple-ux-apple.gif" style="width: 50%;">

<p style="text-align:center"><i>Normal iTunes payment flow</i></p>

<img alt="Normal payment flow" src="https://alasda.ir/images/post-apple-ux-normal.gif" style="width: 50%;">
<br/>
##### What the fudge!?!

The iCloud payment journey is missing the ‚Äúdouble tap‚Äù home button to confirm. In this case I was simply investigating *what the "Buy" button tap* would do. I did not expect it to buy and buy it immediately. Yet because my face was ever present, I was immediately charged. 

This is just wrong. A very bad and inconsistent UX. 

It is at best neglectful, at worse uncaring. Sure it was just ¬£0.69. It could have been ¬£25 or ¬£199. 

It's these situations that I really feel that Apple is letting us (and themselves) down.
]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/easy-command-line-silent-push-using-houston</guid><title>easy-command-line-silent-push-using-houston</title><description>Easy Command Line Silent Push using Houston</description><link>https://alasda.ir/posts/easy-command-line-silent-push-using-houston</link><pubDate>Mon, 25 Jun 2018 19:35:00 +0100</pubDate><content:encoded><![CDATA[<p>Here is a quick command line to tool to send silent background push notifications to your iOS applications.</p><h3>Houston</h3><p>In a pre-<a href="https://fastlane.tools/">Fastlane</a> world, we had the brilliant and prolific <a href="https://twitter.com/mattt?lang=en">@mattt</a> to thank for the wonderful <a href="https://nomad-cli.com/">Nomad-CLI</a>. A small and powerful set of tools to make life just a little easier for us Apple developers.</p><p>One of them, <a href="https://github.com/nomad/houston">Houston</a> allows for easy communication with Apple‚Äôs PN.</p><p>To install</p><p><code>gem install houston</code></p><p>and test</p><p><code>apn push "&lt;token&gt;" -c /path/to/apple_push_notification.pem -m "Test" </code></p><h3>Silent pushes</h3><p>A silent push is used to wake an application and get it to do small chunks of work. These pushes are not guaranteed to be sent or received by device. In the worst case, if the device's OS detects abuse of this 30 seconds of work, your silent push notifications will just be ignore.</p><p>Once you're tested that Houston works, to send a silent push notification simply use the command line</p><pre><code>apn push ‚Äú&lt;token&gt;‚Äù -c /path/to/apple_push_notification.pem -P "{\"aps\" : {\"content-available\" : 1},\"acme1\" : \"bar\",\"acme2\" : 42}"
</code></pre><p>Note the use of escape character <code>\</code> to allow JSON string formats.</p><p>In this example above any device targeted by <code>&lt;token&gt;</code> will wake up and received the payload</p><pre><code>"acme1": "bar",
"acme2": 42
</code></pre><p>Happy pushing.</p><h3>Addendum</h3><ul><li>To generate a pemfile, it is recommended to use <a href="https://fastlane.tools/pem">fastlane pem</a> , which completely automates the process of creating the certificate.</li><li>Make sure your app allows background updates and can receive pushes. <a href="https://www.raywenderlich.com/8164-push-notifications-tutorial-getting-started">Push tutorial</a></li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/goodbye-stack-overflow-documentation</guid><title>goodbye-stack-overflow-documentation</title><description>Goodbye Stack Overflow Documentation</description><link>https://alasda.ir/posts/goodbye-stack-overflow-documentation</link><pubDate>Thu, 10 Aug 2017 12:11:00 +0100</pubDate><content:encoded><![CDATA[<p><a href="https://meta.stackoverflow.com/questions/354217/sunsetting-documentation/?utm_source=so-owned&utm_campaign=doc-sunset&utm_medium=email">Jon Ericson of Stack Overflow writes</a></p><p>&gt;<strong>We will stop accepting contributions to Documentation on August 8</strong></p><blockquote><p>We still think Stack Overflow Documentation is a good idea... initial research has mostly been proven correct.</p></blockquote><blockquote><p>...</p></blockquote><p>&gt;By May, it was clear we weren't on the right path. <strong>New users weren't coming to Documentation</strong>. So we went back to the drawing board and started another round of user interviews focused on Transact SQL. We brought on a user experience researcher to help us interview technical writers. The results were encouraging in the sense that we know a lot more about what makes for great documentation and how we might support that effort. But it was also clear fixing Documentation would require a significantly larger team.</p><p>&gt;In addition, it‚Äôll be a very long time before that work will pay off in terms of bringing new users to Stack Overflow. Our interviews showed even very experienced users of T-SQL felt inadequate to contribute documentation.</p><blockquote><p>...</p></blockquote><blockquote><p>Finally, our research showed that while a lot of developers were dissatisfied, the current state of <strong>programming documentation is not universally broken the way Q&amp;A</strong> was when Stack Overflow started. In particular, we heard over and over that Stack Overflow has become de facto documentation for many technologies.</p></blockquote><p>While I'm a little sad by this news (I had previously <a href="http://ajmccall.com/documentation-stackexchange/">written</a> about this project) I believe that Stack Overflow Documentation demise documents one last great lesson in tech. <em>How and when to abandon a project.</em></p><p>No matter the <s>good</s> great intentions, some projects you are working on are just not working. It's important to identify them <em>early</em>, identify viable improvements to make and test the changes. If the project is still dying, either pivot or abandon it.</p><p>And we all know which one is the hardest decision to make.</p><p>&gt;Even though this outcome has been a disappointment, most of us agree it was the right decision.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/xcode-compilation-error-using-named-objc-attribute</guid><title>xcode-compilation-error-using-named-objc-attribute</title><description>xCode compilation error using named @objc attribute</description><link>https://alasda.ir/posts/xcode-compilation-error-using-named-objc-attribute</link><pubDate>Thu, 8 Jun 2017 14:16:00 +0100</pubDate><content:encoded><![CDATA[<p>I recently stumbled on this interesting issue and decided to jot it down.</p><h3>@objc</h3><p>xCode allows <a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html">mix and matching</a> Swift and Objective-c code within a single project.</p><p>A Swift file's functionality is exposed to Objective-c classes via the <code>@objc</code> attribute as such</p><pre><code>@objc public class SimpleSwift : NSObject {

}
</code></pre><p>When compiled, xCode will generate an Objective-c interface for this Swift class in an auto-generated interface <code>$(SWIFT_MODULE_NAME)-Swift.h</code>. This file will contain something that looks like this</p><pre><code>SWIFT_CLASS("_TtC14SwiftObjcSwift11SimpleSwift")
@interface SimpleSwift : NSObject
- (nonnull instancetype)init OBJC_DESIGNATED_INITIALIZER;
@end
</code></pre><p>Additionally we can use <code>objc(name)</code> to control the generated interface <em>name</em>. This can be useful in a few places. For instance at <a href="http://trainline.com">Trainline.com</a> we do this to maintain our the Objective-c style naming convention of <code>XXXClassName</code> of our legacy codebase.</p><p>This test Swift class becomes</p><pre><code>@objc(SOSSimpleSwift) public class SimpleSwift : NSObject {

}
</code></pre><p>Now the auto-generated interface becomes</p><pre><code>SWIFT_CLASS_NAMED("SimpleSwift")
@interface SOSSimpleSwift : NSObject
- (nonnull instancetype)init OBJC_DESIGNATED_INITIALIZER;
@end
</code></pre><h3>The Issue</h3><p>Now let's use this interface in an Objective-c class and then extend that in a Swift file.</p><pre><code class="language-swift">#import &lt;Foundation/Foundation.h&gt;
@class SOSSimpleSwift;

@interface SOSBaseObjc : NSObject

- (void)foo:(SOSSimpleSwift *)simpleSwift;
- (void)bar:(NSString *)aString;

@end
</code></pre><p>A Swift subclass</p><pre><code class="language-swift">class ExtendedSwift : SOSBaseObjc {

    // This method declaration will not compile
    override func foo(_ simpleSwift: SOSSimpleSwift!) {
    }
    
    override func bar(_ aString: String!) {
    }
}
</code></pre><h3>Solution</h3><p>The only solution at time of writing is dropping the <em>name</em> from <code>@objc(name)</code> attribute.</p><p>My good friend <a href="https://twitter.com/defragged">Mark</a> may have an answer from his stint at WWDC.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/recording-a-video-of-the-xcode-simulator</guid><title>recording-a-video-of-the-xcode-simulator</title><description>Recording a video of the Xcode simulator</description><link>https://alasda.ir/posts/recording-a-video-of-the-xcode-simulator</link><pubDate>Mon, 15 May 2017 09:39:00 +0100</pubDate><content:encoded><![CDATA[<p>I have always used QuickTime to record video of a simulator session. And yet there has existed, for quite sometime too, a far easier way to do this using <code>xcrun</code> tool.</p><pre><code>xcrun simctl io booted recordVideo ~/Desktop/simulator-recording.mov
</code></pre><p>And voila, a high fidelity video of whatever it is you did on your simulator.</p><p>I found this, and a bunch of other pro <code>xcrun</code> tips, on this excellent Medium article, <a href="https://medium.com/the-traveled-ios-developers-guide/ios-simulator-power-ups-407060863b3c">iOS Simulator Power Ups</a></p><p>Among the excellent top tips, and one which I did know (#smallwins), is to use <code>xcrun</code> to depp links.</p><blockquote><p>Another increasingly common part of iOS development is testing url schemes. With deep linking becoming a powerful tool to incorporate both as a consumer and a provider, simctl can help here too:</p></blockquote><pre><code>xcrun simctl openurl booted https://www.dreaminginbinary.co/
</code></pre><blockquote><p>And just like that, the active device pops open Safari with the URL. Of course, if you know other app‚Äôs schemes‚Ää‚Äî‚Ääthose are fair game, too:</p></blockquote><pre><code>xcrun simctl openurl booted sms: #Open Messages
</code></pre><p>Go on, give them all a quick go.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/documentation-stackexchange</guid><title>documentation-stackexchange</title><description>Stackoverflow takes on documentation.</description><link>https://alasda.ir/posts/documentation-stackexchange</link><pubDate>Wed, 22 Jun 2016 23:13:00 +0100</pubDate><content:encoded><![CDATA[<p>Simply put I love stackoverflow.com [SO]. An obvious statement from a developer, but I really love everything about it.</p><p>I love the guys that created it, the reasons they did and the way they went about it. I love how well it <a href="https://en.wikipedia.org/wiki/Stack_Overflow#Statistics">works</a>. I love the awesomely named, <a href="http://area51.stackexhcange.com">Area51</a> and the <a href="http://pets.stackexchange.com/">communities</a> it spawned.</p><p>I fucking love the <a href="http://stackoverflow.com/users/179843/ajmccall?tab=reputation">points</a> man. Which meant I was pretty excited to <a href="http://meta.stackoverflow.com/questions/303865/warlords-of-documentation-a-proposed-expansion-of-stack-overflow">finally</a> hear about the beta release of SO's latest offerings, http://docs-beta.stackexchange.com/.</p><p>Below I give a brief description and try it first hand.</p><p>######Documentation hasn't moved on</p><p>The developer community has long known that documentation is never perfect or reliable. Since there is no incentive to maintain documentation as a code base grows, an API's documentation quickly becomes spotty, uninformative or non existent.</p><p>The SO community think that they can use their extremely very successful system to create meaningful, rich and informative documentation.</p><p>Using those damned points and badges they are trying to <s>get</s> trick the developer community to write clear, informative and modern documentation.</p><p>######How Rather than dryly adding wordage for each API, library by library, documentation is written based on a topic with worked examples to give developers the right information to use the API.</p><p>A typical iOS topic could be <code>NSThread</code> with examples given such as</p><ul><li>Run a thread in the background</li><li>Run two threads synchronously etc</li></ul><p>Each topic may come with a formalization of the parameters as well as remarks on usage, pitfalls and other bits of information.</p><p>I've given it a bash with the Apple classic <code>Reachability</code> <a href="http://docs-beta.stackexchange.com/documentation/ios/drafts/6243">here</a>.</p><p>######Near future Beyond documentation, I see that at some point, this site will become the defacto destination common code snippets.</p><p>There will be far few developers punching in the same old search term, just so they can find that <em>one</em> SO answer with the code snippet they need.</p><p>I am looking at you "<em>how to dispatch a block once on main thread</em>"!</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/idedistributionerrordomain-code-1-error-and-fastlane</guid><title>idedistributionerrordomain-code-1-error-and-fastlane</title><description>IDEDistributionErrorDomain Code=1 error and Fastlane</description><link>https://alasda.ir/posts/idedistributionerrordomain-code-1-error-and-fastlane</link><pubDate>Tue, 16 Feb 2016 15:53:00 +0000</pubDate><content:encoded><![CDATA[<p>If you are not using the amazing <a href="https://fastlane.tools/">FastLane</a> build tools then it's time you did.</p><p>If you are though, you may have noticed that your build servers are breaking, especially when using the <a href="https://github.com/fastlane/fastlane/blob/master/docs/Actions.md#deliver">deliver</a> or <a href="https://github.com/fastlane/fastlane/blob/master/docs/Actions.md#pilot">pilot</a> actions.</p><p>A sample error below</p><pre><code class="language-Error Domain=IDEDistributionErrorDomain Code=1">The operation couldn't be completed. (IDEDistributionErrorDomain error 1.)```

#####The problem

Apple's WWDR certificate expired on 14/02/16 and simply replacing this certificate with the new one should solve the issue.


#####The fix

- Download the new certificate https://developer.apple.com/certificationauthority/AppleWWDRCA.cer
- Open keychain and remove the expired certificate from `login` and `system`
- Add new certificate

#####References
- https://github.com/fastlane/gym/issues/100#issuecomment-184026293
- [https://www.reddit.com/r/iOSProgramming/comments/45siza/this_certificate_has_an_invalid_issuer/](https://www.reddit.com/r/iOSProgramming/comments/45siza/this_certificate_has_an_invalid_issuer/) </code></pre>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/how-to-write-a-unit-test</guid><title>how-to-write-a-unit-test</title><description>How to write clean code unit test (#1)</description><link>https://alasda.ir/posts/how-to-write-a-unit-test</link><pubDate>Fri, 11 Dec 2015 21:29:00 +0000</pubDate><content:encoded><![CDATA[<p>It's become intuitive that writing unit tests is a good thing. It's less intuitive why it's important to have clean, maintainable unit test code. It is perhaps even more important the clean, maintainable production code. Why? Imagine this scenario...</p><p>&gt;After a disastrous few releases, the development team decide in their retro that they want to sufficiently cover the code base to prevent further bugs. Their PM, begrudgingly, gives them 1 month to retroactively write tests.<br><br>&gt;The developers feel that since they are not writing production code, they can write quick and unstructured unit test code.</p><blockquote><p>After 1 month, both developers and the PM are happy. Developers because they have 85% coverage. The PM because he has stable code base.</p></blockquote><blockquote><p>As time progresses though, the team may as well have not spent that 1 month in the first place. New developers battle to read the unit tests and can't add to them. While new features, either break the unit tests, in which case the tests are commented out, or are simply not added due to the overheard of refactoring the unit test class.</p></blockquote><p>As the scenario above highlights, once a team is committed to writing unit tests, it is vital to keep that code base as well maintained, <strong><em>or better</em></strong>, as your production code.</p><p>As Uncle Bob puts it better</p><blockquote><p>[asymmetrical]. The quality of the production code depends on the tests; but the quality of the tests is <em>independent</em> of the production code.</p></blockquote><p>In this two parter, I'll demonstrate how I like to structure my unit tests and show you some of the rules and conventions to use to make your unit tests readable, reusable and maintainable.</p><p>-- --</p><p>####The setup</p><p>Below is a simplified version of a real world class called <code>AppStoreRater</code>. This class prompts users to rate our app (<a href="http://www.mtvtrax.com">MTV Trax</a>) after a certain number of tracks have been played.</p><pre><code class="language-objc">@interface AppStoreRater : NSObject

@property (nonatomic, strong) AlertManager *alertManager;
@property (nonatomic, strong) Analytics *analytics;
@property (nonatomic, weak) id&lt;PlaybackNotifier&gt; playbackNotifier; 

@end
</code></pre><p>It is not important to explain how to use this class except perhaps to mention that the property <code>PlaybackNotifier</code> is used to "tell" <code>AppStoreRater</code> when a track has been played. After a set number of plays, the "Please rate this app" popup dialogue will appear.</p><p><code>PlaybackNotifier</code> follows the observer pattern and has the follow methods</p><pre><code class="language-objc">- (void)addObserver:(id&lt;PlaybackObserver&gt;)observer;
- (void)removeObserver:(id&lt;PlaybackObserver&gt;)observer;
</code></pre><p>####The skeleton unit test A skeleton unit test class is given below, and although it contains no tests yet, it is still performing validations.</p><pre><code class="language-objc">@interface TestAppStoreRater : XCTestCase

// use class properties as often as you can 
@property (nonatomic, strong) id mockAlertManager;
@property (nonatomic, strong) id mockAnalytics;
@property (nonatomic, strong) id mockPlaybackNotifier;

// only 1 object, your tested class, should be real
@property (nonatomic, strong) AppStoreRater *appStoreRater;
@end

@implementation TestAppStoreRater

#pragma mark - Test

#pragma mark - SetUp

- (void)setUp {
    [super setUp];
    
    // order of setUp, should mirror order of tearDown
    [self setUpAlertManager];
    [self setUpAnalytics];
    [self setUpPlaybackNotifier];


    // only 1 object, your tested class, should be real
    self.appStoreRater = [[AppStoreRater alloc] init];
    self.appStoreRater.alertManager = self.mockAlertManager;
    self.appStoreRater.analytics = self.mockAnalytics;
}

- (void)setUpAlertManager {
    
    // always use STRICT mocks if possible
    self.mockAlertManager = OCMStrictClassMock([AlertManager class]);
}

- (void)setUpAnalytics {
    
    self.mockAnalytics = OCMStrictClassMock([AnalyticsController class]);
}

- (void)setUpPlaybackNotifier {

    self.mockPlaybackNotifier = OCMStrictProtocolMock(@protocol(PlaybackNotifier));

    // We expect that AppStoreRater always adds and removes  
    // itself as an observer during it's lifecycle.
    OCMExpect(self.mockPlaybackNotifier addObserver:[OCMArgs any]);
    OCMExpect(self.mockPlaybackNotifier removeObserver:[OCMArgs any]);
}

#pragma mark - TearDown

- (void)tearDown {
    
    // order of tearDown, should mirror order of setUp
    self.appStoreRater = nil;
    [self tearDownPlaybackNotifier];
    [self tearDownAnalytics];
    [self tearDownAlertManager];
    
    [super tearDown];
}

- (void)tearDownPlaybackNotifier {
    
    OCMVerifyAll(self.mockPlaybackNotifier);
    self.mockPlaybackNotifier = nil;
}

- (void)tearDownAnalytics {
    
    OCMVerifyAll(self.mockAnalytics);
    self.mockAnalytics = nil;
}

- (void)tearDownAlertManager {
    
    OCMVerifyAll(self.mockAlertManager);
    self.mockAlertManager = nil;
}
@end
</code></pre><p>Some things to note to go with the commented sections</p><p>######Only ever have one real object There should only ever be one class that is initialised, and that is class the one you are testing. <code>AppStoreRater</code>. All other classes should be mocked.</p><p><em>I use <a href="http://ocmock.org/">OCMock</a> for objective-c</em></p><p>######Have as many properties as you can</p><p>Class properties, created in <code>setUp</code> and then verified and torn down in <code>tearDown</code> save you loads of repetitive code. Mocked class properties can still be mocked with <code>expected</code> behaviours in the test methods themselves, but you will see that <code>OCMVerifyAll(mock)</code> is called in the <code>tearDown</code>.</p><p><em>This makes you unit test classes more readable and maintainable.</em></p><p>######Use STRICT over PARTIAL mocks It is generally always better to use <em>strict</em> mocks over <em>partial</em> mocks. A strict mock will throw an exception if any unexpected method or property is called, while a partial mock will return <code>nil</code> or do nothing.</p><p><em>Partial mocks hide bugs. If you can't use a strict mock, then it probably suggests your class isn't structured right.</em></p><p>######SetUp and TearDown mirror each other The order of setting up and tearing down of the mocks and tested class is important. Notice that in <code>tearDown</code>, the objects are being nilled in the reverse order to their creation in <code>setup</code>. This is an important habit to get into, as it allows mocked objects modified during the tested class's lifecycle to verify those actions.</p><p>Perhaps a worked example will explain better.</p><p>Remember that <code>AppStoreRater</code> adds itself as an observer of <code>playbackNotifier</code> when that property is set. It also removes itself as an observer during <code>dealloc</code> when the <code>AppStoreRater</code> object is destroyed.</p><p>I our <code>tearDown</code> method</p><pre><code class="language-objc">- (void)tearDown {
    
    self.appStoreRater = nil;
</code></pre><p><code>self.appStoreRater = nil</code> will call <code>dealloc</code> on our tested class</p><pre><code class="language-objc">- (void)dealloc {
    [self.playbackNotifier removeObserver:self]
}
</code></pre><p>Since <code>self.playbackNotifier</code> is a mock object itself. It must not be <code>nil</code> so we can record the call to <code>removeObserver:</code>. This method call is verified moments later in</p><pre><code class="language-objc">- (void)tearDownPlaybackNotifier {
    
    OCMVerifyAll(self.mockPlaybackNotifier);
</code></pre><p><em>Even if your tested class doesn't have observers or use <code>NSNotificationCenter</code> getting the <code>setUp</code> and <code>tearDown</code> order right is just a good habit to get into.</em></p><p>######Follow clean code practises Follow all clean code practises. Break up the code into well named short methods. Groups methods that call one another close together. And in <code>objc</code> use <code>pragma mark</code> to make it easier to skim read the class. -- --</p><p>Right, so now we have a good unit test skeleton to work with. I part two we'll discuss how to implement the test methods.</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/apple-music-itunes-affiliate</guid><title>apple-music-itunes-affiliate</title><description>Apple Music and changes to iTunes Affiliate urls</description><link>https://alasda.ir/posts/apple-music-itunes-affiliate</link><pubDate>Fri, 20 Nov 2015 22:20:00 +0000</pubDate><content:encoded><![CDATA[<p>When Apple released Apple Music, they made a small change to the way their <a href="https://www.apple.com/itunes/affiliates/">iTunes affiliate</a> program worked.</p><p>Previously, any url that linked to some iTunes content, would always open iTunes itself.</p><p>After Apple Music, only urls with the <code>app=itunes</code> parameter would do this. Older style urls, ones without this parameter now open Apple Music by default.</p><p>Oh very sneaky Apple. We see what you did there.</p><p>Our app <a href="http://mtvtrax.com">MTV Trax</a> allows users to buy any track they would like to keep. And for a few months, our buy buttons would direct our lovely users to a competing service. <em>To a competing service!</em></p><p>Very sneaky.</p><p>The changes were documented <a href="https://www.apple.com/itunes/affiliates/resources/blog/apple-music-is-now-live-1.html">here</a> although I'm not sure how well it was publicised.</p><p>If you are picky about where your users go after tapping on a buy link, you might want to reexamine your links.</p><p>######Example</p><p>For instance</p><p><code>https://itunes.apple.com/us/album/cool-for-the-summer-single/id1013069897?app=music</code></p><p>will take your user to Apple Music where they can stream the song, while</p><p><code>https://itunes.apple.com/us/album/cool-for-the-summer-single/id1013069897?app=itunes</code></p><p>takes you to the iTunes Store where you can buy the song.</p><p>######How much do I earn?</p><p>In both cases you'll still be paid by Apple for sending users their way, although even here it has change.</p><p>For iTunes redirects, an affiliate member earns 7% of any sales within 24hrs on iTunes.</p><p>For Apple Music redirects, an affiliate member earns a one-off <em>$5</em> fee, if the user purchases/renews their subscription.</p><p>Back of the envelope calculates suggest that if your user spends more than <em>$70</em> on iTunes you are better off sending them to iTunes.</p><p>######Summary</p><p>It seems like a no brainer to always redirect to iTunes.</p><p>For one, iTunes redirects always earn commission unlike the Apple Music one-off payment. An iTunes redirect commission is also paid on <em>all</em> purchases made, not just the item you linked to. Movies, TV shows, books and games are included.</p><p>Lastly, you only get paid by Apple if, and that's a big <em>if</em>, the user subscribes at the end of their trial.</p><p>My advise?</p><p>Don't feed the Apple Music monster.</p><p>Send your users to iTunes and receive a little more cash in return.</p><p>#####Further reading</p><ul><li><a href="http://awkwardhare.com/post/117029547150/use-the-itunes-affiliate-program-its-worth-it">Why it's worth it to join the affiliate program</a></li><li><a href="https://www.apple.com/itunes/affiliates/">iTunes Affiliate Program</a></li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/validate-itunes-receipt-using-curl</guid><title>validate-itunes-receipt-using-curl</title><description>Validate iTunes receipt using cURL</description><link>https://alasda.ir/posts/validate-itunes-receipt-using-curl</link><pubDate>Mon, 19 Oct 2015 15:27:00 +0100</pubDate><content:encoded><![CDATA[<p>Create a JSON file called <code>body.json</code></p><pre><code>{
	"receipt-data" : "&lt;your receipt base64 encoded&gt;",
	"password" :"&lt;your shared secret&gt;"
}
</code></pre><ul><li><code>receipt-data</code> must contain your receipt as a base64 encoded string.</li><li><code>password</code> is only needed if the receipt if for a recurring subscription product. The shared secret password is available from your team's iTunes Connect account.</li></ul><p>Open favourite terminal, navigate to <code>body.json</code> file's location and type</p><pre><code>curl -H "Content-Type: application/json" --data @body.json https://buy.itunes.apple.com/verifyReceipt
</code></pre><p>A <code>200</code> response and a full JSON detailing the product purchase is returned if all is good.</p><p>Look out for <code>21007</code> error, which implies that a test receipt was sent to the production server. Simply change the url to <code>https://sandbox.itunes.apple.com/verifyReceipt</code>.</p><p>All other <code>2000x</code> response errors and their meanings can be found here, <a href="https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html#//apple_ref/doc/uid/TP40010573-CH104-SW4">Apple Docs</a>.</p><hr><p>I enjoy prettify the output using <a href="https://github.com/mconigliaro/jazor">jazor</a>.</p><pre><code>[sudo] gem install jazor bundler
curl -H "Content-Type: application/json" --data @body.json https://buy.itunes.apple.com/verifyReceipt | jazor -c
</code></pre>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/google-signin-crash</guid><title>google-signin-crash</title><description>Google SignIn profile image crash</description><link>https://alasda.ir/posts/google-signin-crash</link><pubDate>Wed, 30 Sep 2015 19:19:00 +0100</pubDate><content:encoded><![CDATA[<p>####TL;DR Downgrade <code>GoogleSignIn</code> pod to <code>2.2.0</code></p><p>####Under the hood</p><p>The latest version of Google's SignIn cocoapod, <code>Google/SignIn (2.3.0)</code> crashes when requesting the user's profile image.</p><pre><code>func signIn(signIn: GIDSignIn!, didSignInForUser user: GIDGoogleUser!, withError error: NSError!) {

    if (error == nil) {

        let userId = user.userID
        let name = user.profile.name
        let email = user.profile.email
        if user.profile.hasImage{
            // crash here !!!!!!!! 
            let imageUrl = user.profile.imageURLWithDimension(200)
        }
    //...
}
</code></pre><p>The crash is</p><pre><code>2015-09-30 18:56:46.968 GoogleLogin[96614:5594982] -[NSURL isFIFEUrl]: unrecognized selector sent to instance 0x7fe248f11f20
</code></pre><p>It looks like Google accidentally released an SDK with a typo in it because clearly the line should be <code>- [NSURL isFILEUrl]:</code></p><p>Simply downgrade to the latest, <em>stable</em>, release to prevent these crashes. My <code>PodFile</code> looks like this</p><pre><code>pod 'Google/SignIn', '1.0.7'
</code></pre><p><a href="http://stackoverflow.com/a/32872065/179843">StackOverflow</a></p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/wwdc-2015</guid><title>wwdc-2015</title><description>WWDC - 2015</description><link>https://alasda.ir/posts/wwdc-2015</link><pubDate>Tue, 14 Jul 2015 20:57:00 +0100</pubDate><content:encoded><![CDATA[<p>Summarised noted, mostly for myself, of interesting 2015 WWDC sessions. I'll update them as I watch</p><p>###<a href="https://developer.apple.com/videos/wwdc/2015/?id=102">State of the Platform</a></p><p><strong>App thinning</strong></p><ul><li>Should happen automatically.</li><li>Downloadable resource/bundles from iTunes Connect</li></ul><p><strong>BitCode</strong></p><ul><li>Optimises binary at submission time.</li><li>xCode 7 setting should be enabled by default.</li></ul><p>#####watchOS2 Bringing native watch apps in watchOS2</p><p><strong>Complications</strong></p><ul><li>Data is driven by a timeline so that it's accurate at the time of raising your wrist</li><li>Time line can change via "scheduled updates" i.e. weather</li><li>Complication can be updated by a push message</li><li>Timeline feature</li></ul><p><strong>Notification</strong></p><ul><li>Full screen notifications</li><li>With custom action buttons</li></ul><p>####Foundation Technologies <strong>Security</strong></p><ul><li>App transport security</li><li>Automatically enforce best practise</li><li>NSURLSession has it be default, might need to add url exception list incase server is not ready.</li></ul><p><strong>IPV6</strong></p><ul><li>Mac can emulate IPV6 network via personal hotspot.</li><li>All apps must be IPV6 compliant for submission on iOS9</li></ul><p><strong>Internationalization</strong></p><ul><li><code>NSPersonalNameFormatter</code>, can give first name as per country.</li><li>Left-to-right languages is now left-to-right on the entire UI. Should be for free if using standard components.</li></ul><p><strong>Universal Links</strong></p><ul><li>Host a file on website listing url application handles natively</li><li><code>NSUserActivity</code> wraps up the link</li></ul><p><strong>Search</strong></p><ul><li>Three ways to index content</li><li>App indexing extension, using by CoreSpot to periodically index your app's content</li><li><code>NSUserActivity</code>, used to record what your user has been up to.</li><li>Web Markup, indexed by Apple's web crawler.</li></ul><p><strong>Multitasking</strong></p><ul><li>Must use adaptive layout, <strong>size classes</strong>, <strong>dynamic type</strong> for text and <strong>autolayout</strong></li><li>Size classes can change <em>regular</em>|<em>compact</em> to <em>compact</em>|<em>compact</em> as you resize the split view</li></ul><p><strong>SWIFT</strong></p><ul><li>New error handling, <strong>try/catch</strong></li><li>Availability checking to check if features/functions are available to the iOS</li><li>Protocol programming??</li><li><strong>guard</strong> to check conditions and bail on function</li><li><strong>generics</strong> in objc-c</li></ul><p><strong>xCode 7</strong></p><ul><li><strong>header file</strong> view of SWIFT code</li><li>rich text documentation</li><li>playgrounds</li><li><strong>stackview</strong></li><li>new profiler/debugger helps with energy usage</li><li>new instruments</li><li>address sanitiser to help debug memory</li><li>test apis</li><li>test performance</li><li>user interface testing</li><li>code coverage</li></ul><ul><li><em> </em></li></ul><p>###<a href="https://developer.apple.com/videos/wwdc/2015/?id=105">Introducing watchOS 2.0</a></p><p>#####What's new in WatchKit New crown activated selectors.</p><ul><li><strong>List</strong>, <strong>stack</strong> and <strong>sequence</strong> selectors.</li><li>Last two work only with graphics.</li><li>Background can move in relation to the selection index.</li></ul><p><strong>Animation</strong></p><ul><li>Similar to <code>UIViewAnimation</code> with blocks. See video <a href="https://developer.apple.com/videos/wwdc/2015/?id=216">Layout and Animation Techniques for WatchKit</a>.</li></ul><p><strong>Haptic engine</strong></p><ul><li>Access to enumeration of types of haptic feedback to use.</li></ul><p><strong>Audio recorder and speaker access.</strong></p><p><strong>Video playback</strong></p><ul><li>Local or off the network.</li></ul><p><strong>Audio playback</strong></p><ul><li><em>"Long form audio"</em> can be played with something similar to <code>AVFoundation</code></li><li>Difference is music to be played is passed off to system to play to enhance battery life.</li><li>Allows playback even if application is not running</li></ul><p><strong>New Alert API</strong></p><p>Improved visuals</p><p>####New/Improved SDKs in watchOS</p><p><strong>ClockKit</strong></p><ul><li>Complications</li><li>Timelines</li><li><a href="https://developer.apple.com/videos/wwdc/2015/?id=209">WWDC Watch complications</a></li></ul><p><strong>WatchConnectivity</strong></p><ul><li>Normal <code>NSURLSession</code> stuff</li><li>WatchConnectivity to link phone and watch. For uploading data from phone to watch (or visa versa).</li><li>WatchConnectivity uses <code>Application Context</code> to send <code>Dictionary</code> data to both.</li><li><code>FileTransferAPI</code> to send larger files.</li><li><code>SendMessageAPI</code> can be used to send message from watch to phone, waking up the application. Sending the other way doesn't wake up the watch app.</li><li><a href="https://developer.apple.com/videos/wwdc/2015/?id=713">WWDC WatchConnectivity</a></li></ul><p><strong>CoreMotion</strong></p><ul><li>Enhanced to provide real time motion data to running app.</li><li>Can provider motion data to app not running and batch send the data when app opens.</li></ul><p><strong>Security</strong></p><ul><li>When watch is removed from wrist it becomes locked.</li></ul><ul><li><em> </em></li></ul><h3><a href="https://developer.apple.com/videos/wwdc/2015/?id=709">Introducing Search APIs</a></h3><p>Three new related search APIs</p><ul><li><strong>NSUserActivity</strong> for viewed public app content.</li><li><strong>CoreSpotlight</strong> Any app generated content.</li><li><strong>Web Markup</strong> App content on web.</li></ul><h5>NSUserActivity</h5><p><code>NSUserActivity</code> objects are created as user is using your app and added to the On-Device Index.</p><p><code>NSUserActivity</code> has properties to describe</p><ul><li><code>Title</code> and <code>keywords: Set&lt;String&gt;</code></li><li><code>userInfo</code> used to repopulate the application state</li><li><code>contentAttributeSet</code> a set of attributes allowing iOS to categorise and display the activity better in the search results.</li><li><code>expirationDate</code> if this activity expires.</li><li><code>isActive</code> informs system this is the active user activity.</li></ul><p>If an <code>NSUserActivity</code> is designated as <strong>public</strong>, when it's index (via the user using the app) this activity is indexed by the iCloud index and the activity is available to all users via Spotlight. If <code>NSUserActivity</code> contains web url, then it's available in Safari such as well.</p><p>Making <code>NSUserDefaults</code> public doesn't mean it's indexed. Only indexed if searched in spotlight <strong>and</strong> engaged by many users.</p><p>By adding <code>NSUserActivity</code> to the app you get</p><ul><li>Hand-off</li><li>Siri reminder <em>Remind me about this</em> as demo'ed.</li></ul><h5>CoreSpotlight</h5><p>Create <code>CSSearchableItem</code>, add metadata via <code>CSSearchableItemAttributeSet</code> and then add to <code>CSSearchableIndex</code> datastore.</p><p>When user taps on search result, the unique id of the <code>CSSearchableItem</code> is returned and that item can be retrieved from the <code>CSSearchableIndex</code> datastore.</p><p>The <code>CSSearchableIndex</code></p><ul><li>Allows for updating and deleting of <code>CSSearchableItem</code></li><li>Batching of updates for large indexes</li><li><code>CSSearchableIndexDelegate</code> and <code>Extension</code> so that the index can communicate with your app when in foreground and background.</li></ul><p>#####Web Markup</p><p><em>Applebot</em> has been crawling the web looking for mobile deep links. <em>Applebot</em> searches supports popular standards such as Smart App Banners, Twitter Cards and Facebook's App Links.</p><p>New iOS9, <strong>universal links</strong>, link back to your application with normal looking HTML. See <a href="https://developer.apple.com/videos/wwdc/2015/?id=509">Seamless Linking to Your App</a></p><h5>Ranking</h5><p>The <code>NSUserActivity</code> ranking is determined by many factors</p><ul><li>engagement by many users is key</li><li>speed of linking back to app important. Minimal loading times, view controller presentation and no hurdles such as login.</li></ul><ul><li><em> </em></li></ul>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/itunes-connect-receipt-validation</guid><title>itunes-connect-receipt-validation</title><description>iTunes Receipt Validation Helper</description><link>https://alasda.ir/posts/itunes-connect-receipt-validation</link><pubDate>Thu, 22 Jan 2015 18:59:00 +0000</pubDate><content:encoded><![CDATA[<p>There is lots of <a href="https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html">documentation</a>, <a href="http://www.raywenderlich.com/23266/in-app-purchases-in-ios-6-tutorial-consumables-and-receipt-validation">tutorials</a> and <a href="http://www.objc.io/issue-17/receipt-validation.html">articles</a> covering iTunes receipt validation. This is not one of them.</p><p>Instead I'm offering an iOS client tool to help you and your server team develop iOS receipt validation faster.</p><p>######Scenario</p><p>Your exciting start up is ready to validate all purchases made on it's new iOS app and the server lead wants to know how receipt validation works. After showing them the <a href="https://developer.apple.com/library/ios/releasenotes/General/ValidateAppStoreReceipt/Chapters/ValidateRemotely.html">documentation</a> the first question will invariably be</p><p><em>"Can you give me an iTunes receipt?"</em></p><p>Which is immediately followed by</p><p><em>"What does Apple's receipt validation response look like?"</em></p><p>And so begins the painful process of generating iTunes receipts using phsyical devices and test sandbox users.<br><br>######Solution</p><p>To streamline this process I created a simple iOS application</p><p>https://github.com/ajmccall/iOSReceiptValidationHelper</p><p>It does the following</p><ul><li>Generates an iTunes in-app purchase receipt.</li><li>Validates the receipt against iTunes Connection sandbox server.</li><li>Display validation response.</li><li>Email receipt and validation responses.</li></ul><p>Feel free to download and use this application to provide live data for your server team.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/receipt-validation/screenshot04.png"/>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/find-xcode-simulator</guid><title>find-xcode-simulator</title><description>Find xCode Simulator</description><link>https://alasda.ir/posts/find-xcode-simulator</link><pubDate>Wed, 26 Nov 2014 21:42:00 +0000</pubDate><content:encoded><![CDATA[<p>It's the little things that piss you off the most.</p><p>I, like most iOS developers, have found Apple's decision to revamp xCode's simulator <em>bloody</em> annoying.</p><ul><li>It <em>was</em> located in one place.</li><li>It <em>was</em> simple to identify a simulator.</li><li>It <em>was</em> easy to find the app you were debugging.</li></ul><p>I was so tired of finding my application's folder inside the myriad of alpha-numeric folders that now consitute xCode's simulators, that I wrote a script to help me.</p><p>https://github.com/ajmccall/showSim</p><p>The script concatenates a few Mac/xCode commands to find, and then open the <em>currently active</em> simulator's root folder.</p><p>The commands are</p><pre><code>xcrun simctl list | grep Boot | tr -d '()' | awk {'print "open ~/Library/Developer/CoreSimulator/Devices/"$3"/data/Containers/Data/Application"'} | sh
</code></pre><p>I hope to make a few improvements soon. It would be nice to¬†open the <em>currently installed</em> application's root folder</p>]]></content:encoded></item><item><guid isPermaLink="true">https://alasda.ir/posts/a-cocoapods-xcode-tutorial</guid><title>a-cocoapods-xcode-tutorial</title><description>A Cocoapods xCode tutorial.</description><link>https://alasda.ir/posts/a-cocoapods-xcode-tutorial</link><pubDate>Thu, 13 Nov 2014 22:00:00 +0000</pubDate><content:encoded><![CDATA[<p><em>Whether you're developing an iOS or Mac application, if you're not using <a href="http://www.cocoapods.org">Cocoapods</a> then you're simply doing it wrong!</em> Ok, maybe not <em>wrong</em>, but you're definitely not developing as fast or effectively as possible.</p><p>Cocoapods manages third-party library dependencies for Xcode projects. It allows stand alone projects to <strong><em>easily</em></strong> access hundreds of open-source libraries, while also giving development teams the ability to <strong><em>automatically</em></strong> and <strong><em>safely</em></strong> work together.</p><ul><li><strong><em>Easy</em></strong> - Simply add a single file to the xCode project's root folder and you're ready to go.</li><li><strong><em>Automatic</em></strong> - Run a single command and your project will be setup with the same libraries used by the rest of your team.</li><li><strong><em>Safe</em></strong> - Cocoapods's use of <a href="http://semver.org/">semantic versioning</a> ensures that you'll only get the library updates you want and trust. Future updates are propagated across the team ensuring that everyone is working on exactly the same code base.</li></ul><h2>Getting started</h2><p>Head over to Cocoapods's <a href="http://guides.cocoapods.org/using/getting-started.html">getting started</a> guide for instructions on downloading and installing the <code>pod</code> command line tool.</p><p>Inside your Xcode project's root folder run the following commands.</p><ul><li>Run <code>touch Podfile</code> to create an empty pod file</li><li>Run <code>pod install</code> to add Cocoapods to your project</li><li>Run <code>open YourProject.xcworkspace</code> to your new Xcode project's workspace.</li></ul><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_01.png" alt="enter image description here"/><p>Notice the new <strong><em>pods</em></strong> project that has been added to your Xcode project's workspace. It is empty for now.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_02.png" alt="enter image description here"/><h2>Finding and installing a pod</h2><p>Now that we have a Cocoapods-enabled Xcode project, we can add third-party libraries to it. For this demo, let's add the <a href="https://developers.facebook.com/docs/ios">Facebook's iOS SDK</a> in order to implement a Facebook login feature.</p><p>To find the Facebook library, we use the <a href="http://cocoapods.org">Cocoapods</a> web search bar. Simply type <code>Facebook</code> in the search bar and find the pod best suited to your needs. You can always click on the <code>site</code> link to see who owns this pod.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_03.png" alt="enter image description here"/><p>Copy the pod spec text to your clipboard, and paste it into your <code>Podfile</code>.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_04.png" alt="enter image description here"/><p>Then run <code>pod install</code></p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_05.png" alt="enter image description here"/><p>...and open your Xcode project's workspace.</p><p>Notice that the <strong><em>pods</em></strong> project now contains a few new targets. These will be the targets to compile and build the Facebook SDK and any libraries it depends on.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_06.png" alt="enter image description here"/><p>Notice too that we have not performed any configuration within our Xcode project. All necessary core frameworks have been added, additional pod dependencies resolved and our main project is now aware of the new Facebook pod.</p><p>For more information on what was installed and how, checkout the <a href="http://guides.cocoapods.org/syntax/podspec.html">pod specification file</a> listed for the <a href="https://github.com/CocoaPods/Specs/blob/master/Specs/Facebook-iOS-SDK/3.16.2/Facebook-iOS-SDK.podspec.json">Facebook-iOS-SDK</a> pod.</p><h2>Using a pod</h2><p>Remember that each pod could require configuration before use. For more information on each pod and how it's used, consult that pod's website via <a href="http://cocoapods.org">Cocoapods</a>.</p><p>Following the <a href="https://developers.facebook.com/docs/facebook-login/ios/v2.1">Facebook Login</a> documentation, we're required to add a Facebook app id our project's <code>info.plist</code> file.</p><p>And now the fun part of implementing a simple Facebook login. Add a <code>UIView</code> component to our storyboard's first view controller and change that component's class from <code>UIView</code> to <code>FBLoginView</code> using the Identity Inspector (<code>‚å•‚åò3</code> keyboard shortcut)</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_07.png" alt="enter image description here"/><p>Enhance our login view controller (optional).</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_08.png" alt="enter image description here"/><p>Run the application.</p><p>If you've correctly added the Facebook app id to your project, when a user hits the 'Log in with Facebook' button, they'll be presented with the most appropriate Facebook login view.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_sim_01.png" alt="enter image description here"/><p>You may log in to Facebook, and because we're using Facebook's native view, our users can log out, too.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_sim_04.png" alt="enter image description here"/><p>While this is a very simple application, it should not take away from what's been achieved here. With almost no effort, we've added the entire Facebook SDK to our project. This involved, among other things:</p><ul><li>Downloading Facebook SDK code and any other libraries dependent on it.</li><li>Adding all necessary core frameworks to the project.</li><li>Compiling all source code to work within your project's target platform and architecture.</li><li>Making all public headers and compiled source available to your project's targets.</li></ul><p>We have used Cocoapods to decrease the amount of time configuring, and increase the amount of time coding.</p><h2>Updating a pod</h2><p>In this tutorial we installed the Facebook SDK by adding the following to the <code>Podfile</code>.</p><p><code>pod 'Facebook-iOS-SDK', '~&gt; 3.16'</code></p><p>This tells the pod command tool to install the latest version of the <code>Facebook-iOS-SDK</code> pod version 3.16.x and up to but not including 3.17. Below is a complete list of pod versioning operators [[1]](http://guides.cocoapods.org/syntax/podfile.html#pod)</p><blockquote><p>* <code>&gt; 0.1</code> Any version higher than 0.1. * <code>&gt;= 0.1</code> Version 0.1 and any higher version. <em> <code>&lt; 0.1</code> Any version lower than 0.1.</em> <code>&lt;= 0.1</code> Version 0.1 and any lower version. * <code>~&gt; 0.1.2</code> Version 0.1.2 and the versions up to 0.2, not including 0.2. This operator works based on the last component that you specify in your version requirement. The example is equal to &gt;= 0.1.2 combined with &lt; 0.2.0 and will always match the latest known version matching your requirements.</p></blockquote><p>When it comes time to upgrade to a newer version of any pod, simply run the command <code>pod outdated</code>.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_10.png" alt="enter image description here"/><p>It will alert you to any new version of your installed pods. You can then run <code>pod update</code> to update all pods or <code>pod update &lt;pod_name&gt;</code> to update individual pods.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_11.png" alt="enter image description here"/><p>You may notice that if you change a pod's version within your <code>Podfile</code> and run <code>pod install</code> again, you'll always get the same version that you installed the first time.</p><p>This is because on first install, a special <code>Podfile.lock</code> file is created. This file "locks" the versions of all pods at the first time of installation. <code>Podfile.lock</code> should ideally not be edited. Use <code>pod update</code> to update your pods. More on this in the next section.</p><h2>Working in a team</h2><p>If you're working in a team, you'll want to push your changes to your fellow developers. Any pod-enabled Xcode project should look something like this.</p><img src="https://googledrive.com/host/0B9_o9wJ25OmFZFhoRWxiOTVDUGs/ajmccall/a-cocoapods-xcode-tutorial/binpress_cocoapods_09.png" alt="enter image description here"/><p>All that's required to get your fellow developers using this new pod is to commit the following two files.</p><ul><li><code>Podfile</code> the file that describes how pod was initially setup<ul><li><code>Podfile.lock</code> the file that describes the current state of the pod project</li></ul></li></ul><p>When a team member pulls your new changes, they simply need to run <code>pod install</code>. This will install all pods specified in <code>Podfile</code> and install the versions of those pods specified in the <code>Podfile.lock</code>.</p><p>The combination of a <code>Podfile</code> and <code>Podfile.lock</code> ensure that every member of your team is working off exactly the same third-party code base as you are.</p><h2>Popular pods</h2><p>All mainstream and popular open-source libraries are available on <a href="http://cocoapods.org">Cocoapods.org</a> as this is becoming the de facto mechanism to manage and install third-party libraries.</p><p>Below are some popular, almost essential pods to use</p><ul><li><a href="http://cocoapods.org/?q=afnetworking">AFNetworking</a>: The only framework to use for your networking needs.</li><li><a href="http://cocoapods.org/?q=ocmock">OCMock</a>: Your one-stop unit test mock framework.</li><li><a href="http://cocoapods.org/?q=facebook-ios-sdk">Facebook-iOS-SDK</a>: Maintained by Facebook, so you know it's legit.</li><li><a href="http://cocoapods.org/?q=google-ios">Google</a>: All things Google.</li><li><a href="http://cocoapods.org/?q=viewcontroller">Custom ViewController</a></li><li><a href="http://cocoapods.org/?q=api">API Integrations</a></li><li>And <a href="https://github.com/CocoaPods/Specs">loads</a> more.</li></ul><p>Thanks for reading!</p>]]></content:encoded></item></channel></rss>